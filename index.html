<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ResumeIQ — AI Resume Optimizer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@400;500&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d0d0d;
    --surface: #161616;
    --surface2: #1e1e1e;
    --border: #2a2a2a;
    --gold: #c9a84c;
    --gold-light: #e8c97a;
    --text: #f0ece4;
    --text-muted: #7a7570;
    --text-dim: #4a4540;
    --green: #4caf7d;
    --red: #e05a4e;
    --amber: #f0a500;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'Syne', sans-serif; min-height: 100vh; overflow-x: hidden; }
  body::before { content: ''; position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E"); pointer-events: none; z-index: 1000; opacity: 0.4; }
  nav { display: flex; align-items: center; justify-content: space-between; padding: 1.5rem 3rem; border-bottom: 1px solid var(--border); position: sticky; top: 0; background: rgba(13,13,13,0.95); backdrop-filter: blur(10px); z-index: 100; }
  .logo { font-family: 'DM Serif Display', serif; font-size: 1.5rem; color: var(--gold); letter-spacing: -0.02em; }
  .logo span { color: var(--text); }
  .badge { background: var(--gold); color: #0d0d0d; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; padding: 0.3rem 0.8rem; border-radius: 2px; }
  .hero { padding: 5rem 3rem 3rem; max-width: 1100px; margin: 0 auto; }
  .hero-tag { font-family: 'DM Mono', monospace; font-size: 0.7rem; color: var(--gold); letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem; }
  .hero-tag::before { content: ''; width: 2rem; height: 1px; background: var(--gold); }
  h1 { font-family: 'DM Serif Display', serif; font-size: clamp(2.8rem, 6vw, 5rem); line-height: 1.05; letter-spacing: -0.02em; margin-bottom: 1.5rem; max-width: 700px; }
  h1 em { font-style: italic; color: var(--gold); }
  .hero-sub { color: var(--text-muted); font-size: 1.05rem; max-width: 480px; line-height: 1.7; margin-bottom: 3rem; font-weight: 400; }
  .stats-bar { display: flex; gap: 3rem; padding: 1.5rem 0; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); margin-bottom: 3rem; }
  .stat { display: flex; flex-direction: column; gap: 0.2rem; }
  .stat-num { font-family: 'DM Serif Display', serif; font-size: 1.8rem; color: var(--gold-light); }
  .stat-label { font-size: 0.72rem; color: var(--text-muted); letter-spacing: 0.05em; text-transform: uppercase; }
  .main { max-width: 1100px; margin: 0 auto; padding: 0 3rem 4rem; display: grid; grid-template-columns: 1fr 380px; gap: 2rem; }
  .panel { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; overflow: hidden; }
  .panel-header { padding: 1.2rem 1.5rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
  .panel-title { font-family: 'DM Mono', monospace; font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-muted); }
  .step-badge { font-family: 'DM Mono', monospace; font-size: 0.65rem; color: var(--gold); background: rgba(201,168,76,0.1); border: 1px solid rgba(201,168,76,0.3); padding: 0.2rem 0.6rem; border-radius: 2px; }
  textarea { width: 100%; background: var(--surface2); border: 1px solid var(--border); border-radius: 4px; color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.8rem; padding: 1rem; resize: vertical; outline: none; transition: border-color 0.2s; line-height: 1.6; }
  textarea:focus { border-color: var(--gold); }
  textarea::placeholder { color: var(--text-dim); }
  .field-group { padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
  .field-label { font-family: 'DM Mono', monospace; font-size: 0.68rem; color: var(--text-muted); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.4rem; }
  .btn-analyze { width: calc(100% - 3rem); margin: 0 1.5rem 1.5rem; padding: 1rem; background: var(--gold); color: #0d0d0d; border: none; border-radius: 3px; font-family: 'Syne', sans-serif; font-size: 0.85rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 0.6rem; }
  .btn-analyze:hover { background: var(--gold-light); transform: translateY(-1px); }
  .btn-analyze:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
  .results-panel { display: flex; flex-direction: column; gap: 1.5rem; }
  .score-card { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; padding: 2rem; text-align: center; }
  .score-ring-container { position: relative; width: 140px; height: 140px; margin: 0 auto 1.2rem; }
  .score-ring { transform: rotate(-90deg); }
  .score-ring circle { fill: none; stroke-width: 8; stroke-linecap: round; }
  .score-ring .bg { stroke: var(--border); }
  .score-ring .fg { stroke: var(--gold); stroke-dasharray: 345; stroke-dashoffset: 345; transition: stroke-dashoffset 1.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
  .score-center { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; }
  .score-num { font-family: 'DM Serif Display', serif; font-size: 2.5rem; line-height: 1; color: var(--gold-light); }
  .score-label { font-family: 'DM Mono', monospace; font-size: 0.6rem; color: var(--text-muted); letter-spacing: 0.1em; text-transform: uppercase; }
  .score-verdict { font-family: 'DM Serif Display', serif; font-size: 1.2rem; margin-bottom: 0.3rem; }
  .score-sub { font-size: 0.78rem; color: var(--text-muted); }
  .cat-scores { display: flex; flex-direction: column; gap: 0.8rem; margin-top: 1.2rem; text-align: left; }
  .cat-row { display: flex; align-items: center; gap: 0.8rem; }
  .cat-name { font-size: 0.75rem; color: var(--text-muted); width: 90px; flex-shrink: 0; }
  .cat-bar-bg { flex: 1; height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; }
  .cat-bar-fg { height: 100%; border-radius: 2px; background: var(--gold); width: 0; transition: width 1.2s ease; }
  .cat-val { font-family: 'DM Mono', monospace; font-size: 0.7rem; color: var(--gold); width: 28px; text-align: right; }
  .feedback-card { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; overflow: hidden; }
  .feedback-list { padding: 0.8rem; display: flex; flex-direction: column; gap: 0.6rem; }
  .feedback-item { display: flex; gap: 0.7rem; align-items: flex-start; padding: 0.8rem; background: var(--surface2); border-radius: 3px; font-size: 0.8rem; line-height: 1.5; border-left: 3px solid transparent; animation: slideIn 0.4s ease forwards; opacity: 0; }
  @keyframes slideIn { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
  .feedback-item.good { border-left-color: var(--green); }
  .feedback-item.warn { border-left-color: var(--amber); }
  .feedback-item.bad  { border-left-color: var(--red); }
  .feedback-icon { font-size: 0.9rem; flex-shrink: 0; margin-top: 0.05rem; }
  .keywords-card { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; overflow: hidden; }
  .keywords-grid { padding: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem; }
  .kw { font-family: 'DM Mono', monospace; font-size: 0.68rem; padding: 0.3rem 0.7rem; border-radius: 2px; border: 1px solid; letter-spacing: 0.05em; }
  .kw.found   { color: var(--green); border-color: rgba(76,175,125,0.3); background: rgba(76,175,125,0.08); }
  .kw.missing { color: var(--red);   border-color: rgba(224,90,78,0.3);  background: rgba(224,90,78,0.08); }
  .placeholder { padding: 3rem 2rem; text-align: center; color: var(--text-dim); }
  .placeholder svg { margin: 0 auto 1rem; opacity: 0.2; }
  .placeholder p { font-size: 0.82rem; line-height: 1.6; }
  .loading { padding: 2rem; text-align: center; display: none; }
  .loading.active { display: block; }
  .spinner { width: 40px; height: 40px; border: 2px solid var(--border); border-top-color: var(--gold); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 1rem; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .loading-text { font-family: 'DM Mono', monospace; font-size: 0.72rem; color: var(--text-muted); letter-spacing: 0.1em; }
  .loading-steps { list-style: none; margin-top: 1rem; display: flex; flex-direction: column; gap: 0.4rem; }
  .loading-steps li { font-size: 0.75rem; color: var(--text-dim); transition: color 0.3s; }
  .loading-steps li.active { color: var(--gold); }
  .loading-steps li.done   { color: var(--green); }
  .pricing-strip { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; padding: 1.5rem; margin-top: 0.5rem; }
  .pricing-strip h3 { font-family: 'DM Serif Display', serif; font-size: 1.1rem; margin-bottom: 0.3rem; }
  .pricing-strip p { font-size: 0.78rem; color: var(--text-muted); margin-bottom: 1rem; line-height: 1.5; }
  .pricing-options { display: flex; gap: 0.8rem; }
  .price-card { flex: 1; border: 1px solid var(--border); border-radius: 3px; padding: 1rem; text-align: center; cursor: pointer; transition: all 0.2s; }
  .price-card:hover { border-color: var(--gold); }
  .price-card.featured { border-color: var(--gold); background: rgba(201,168,76,0.06); }
  .price-amount { font-family: 'DM Serif Display', serif; font-size: 1.6rem; color: var(--gold-light); }
  .price-period { font-size: 0.68rem; color: var(--text-dim); }
  .price-label  { font-size: 0.72rem; font-weight: 600; margin-bottom: 0.3rem; }
  .btn-upgrade { width: 100%; margin-top: 0.8rem; padding: 0.6rem; background: var(--gold); color: #0d0d0d; border: none; border-radius: 3px; font-family: 'Syne', sans-serif; font-size: 0.72rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; cursor: pointer; transition: background 0.2s; }
  .btn-upgrade:hover { background: var(--gold-light); }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  .hero, .main { animation: fadeUp 0.6s ease forwards; }
  .main { animation-delay: 0.1s; opacity: 0; }
  @media (max-width: 768px) { nav { padding: 1rem 1.5rem; } .hero { padding: 3rem 1.5rem 2rem; } .main { padding: 0 1.5rem 3rem; grid-template-columns: 1fr; } .stats-bar { gap: 1.5rem; flex-wrap: wrap; } }
</style>
</head>
<body>
<nav>
  <div class="logo">Resume<span>IQ</span></div>
  <div class="badge">AI-Powered</div>
</nav>
<div class="hero">
  <div class="hero-tag">Career Intelligence Platform</div>
  <h1>Get hired faster with <em>AI that reads</em> like a recruiter</h1>
  <p class="hero-sub">Paste your resume and job description. Get an ATS score, keyword gaps, and actionable fixes in seconds.</p>
  <div class="stats-bar">
    <div class="stat"><div class="stat-num">94%</div><div class="stat-label">ATS pass rate after optimization</div></div>
    <div class="stat"><div class="stat-num">2.3×</div><div class="stat-label">More interviews reported</div></div>
    <div class="stat"><div class="stat-num">28s</div><div class="stat-label">Average analysis time</div></div>
  </div>
</div>
<div class="main">
  <div>
    <div class="panel" style="margin-bottom:1.5rem">
      <div class="panel-header"><span class="panel-title">Your Resume</span><span class="step-badge">Step 01</span></div>
      <div class="field-group"><div><div class="field-label">Paste resume text</div><textarea id="resumeText" rows="10" placeholder="Paste your full resume here..."></textarea></div></div>
    </div>
    <div class="panel" style="margin-bottom:1.5rem">
      <div class="panel-header"><span class="panel-title">Job Description</span><span class="step-badge">Step 02</span></div>
      <div class="field-group"><div><div class="field-label">Paste job posting</div><textarea id="jobDesc" rows="7" placeholder="Paste the full job description..."></textarea></div></div>
    </div>
    <button class="btn-analyze" id="analyzeBtn" onclick="analyze()">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
      Analyze My Resume
    </button>
  </div>
  <div class="results-panel">
    <div id="placeholderCard" class="score-card">
      <div class="placeholder">
        <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M8 7h8M8 11h8M8 15h5"/></svg>
        <p>Paste your resume and a job description, then hit Analyze. Your AI-powered ATS score will appear here.</p>
      </div>
    </div>
    <div id="loadingCard" class="score-card loading">
      <div class="spinner"></div>
      <div class="loading-text">Analyzing your resume...</div>
      <ul class="loading-steps" id="loadingSteps">
        <li id="ls1">→ Parsing resume structure</li>
        <li id="ls2">→ Extracting keywords from JD</li>
        <li id="ls3">→ Running ATS simulation</li>
        <li id="ls4">→ Generating recommendations</li>
      </ul>
    </div>
    <div id="scoreCard" class="score-card" style="display:none">
      <div class="score-ring-container">
        <svg class="score-ring" width="140" height="140" viewBox="0 0 120 120">
          <circle class="bg" cx="60" cy="60" r="55"/>
          <circle class="fg" id="scoreCircle" cx="60" cy="60" r="55"/>
        </svg>
        <div class="score-center"><div class="score-num" id="scoreNum">0</div><div class="score-label">ATS Score</div></div>
      </div>
      <div class="score-verdict" id="scoreVerdict"></div>
      <div class="score-sub" id="scoreSub"></div>
      <div class="cat-scores" id="catScores"></div>
    </div>
    <div id="feedbackCard" class="feedback-card" style="display:none">
      <div class="panel-header"><span class="panel-title">Recommendations</span></div>
      <div class="feedback-list" id="feedbackList"></div>
    </div>
    <div id="keywordsCard" class="keywords-card" style="display:none">
      <div class="panel-header"><span class="panel-title">Keyword Analysis</span></div>
      <div class="keywords-grid" id="keywordsGrid"></div>
    </div>
    <div id="pricingCard" class="pricing-strip" style="display:none">
      <h3>Unlock Full Analysis</h3>
      <p>You've used your free analysis. Upgrade for unlimited scans, tailored rewrite suggestions, and cover letter generation.</p>
      <div class="pricing-options">
        <div class="price-card"><div class="price-label">Starter</div><div class="price-amount">$9</div><div class="price-period">/ month</div></div>
        <div class="price-card featured"><div class="price-label">Pro ✦</div><div class="price-amount">$19</div><div class="price-period">/ month</div><button class="btn-upgrade">Get Pro</button></div>
      </div>
    </div>
  </div>
</div>
<script>
  let analysisCount = 0;

  async function analyze() {
    const resume = document.getElementById('resumeText').value.trim();
    const jobDesc = document.getElementById('jobDesc').value.trim();
    if (!resume || !jobDesc) { alert('Please paste both your resume and the job description.'); return; }

    const btn = document.getElementById('analyzeBtn');
    btn.disabled = true;
    document.getElementById('placeholderCard').style.display = 'none';
    document.getElementById('scoreCard').style.display = 'none';
    document.getElementById('feedbackCard').style.display = 'none';
    document.getElementById('keywordsCard').style.display = 'none';
    document.getElementById('pricingCard').style.display = 'none';
    document.getElementById('loadingCard').classList.add('active');

    const steps = ['ls1','ls2','ls3','ls4'];
    for (let i = 0; i < steps.length; i++) {
      await delay(600);
      document.getElementById(steps[i]).classList.add('active');
      if (i > 0) document.getElementById(steps[i-1]).classList.remove('active');
      document.getElementById(steps[i-1 >= 0 ? steps[i-1] : steps[0]]).classList.add('done');
    }

    try {
      const result = await callAPI(resume, jobDesc);
      showResults(result);
      analysisCount++;
      if (analysisCount >= 1) document.getElementById('pricingCard').style.display = 'block';
    } catch(e) {
      alert('Analysis failed: ' + e.message);
      document.getElementById('placeholderCard').style.display = 'block';
    }

    document.getElementById('loadingCard').classList.remove('active');
    steps.forEach(s => document.getElementById(s).classList.remove('active','done'));
    btn.disabled = false;
  }

  async function callAPI(resume, jobDesc) {
    const response = await fetch('/api/analyze', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ resume, jobDesc })
    });
    if (!response.ok) {
      const err = await response.json();
      throw new Error(err.error || 'Analysis failed');
    }
    return await response.json();
  }

  function showResults(data) {
    const score = data.overallScore;
    const circumference = 2 * Math.PI * 55;
    const offset = circumference - (score / 100) * circumference;
    document.getElementById('scoreCard').style.display = 'block';
    document.getElementById('feedbackCard').style.display = 'block';
    document.getElementById('keywordsCard').style.display = 'block';
    animateNum('scoreNum', 0, score, 1200);
    setTimeout(() => { document.getElementById('scoreCircle').style.strokeDashoffset = offset; }, 100);
    const ring = document.getElementById('scoreCircle');
    if (score >= 70) ring.style.stroke = '#4caf7d';
    else if (score >= 50) ring.style.stroke = '#f0a500';
    else ring.style.stroke = '#e05a4e';
    document.getElementById('scoreVerdict').textContent = data.verdict;
    document.getElementById('scoreSub').textContent = data.summary;
    const catEl = document.getElementById('catScores');
    catEl.innerHTML = '';
    data.categories.forEach((cat, i) => {
      catEl.innerHTML += `<div class="cat-row"><div class="cat-name">${cat.name}</div><div class="cat-bar-bg"><div class="cat-bar-fg" id="bar${i}"></div></div><div class="cat-val">${cat.score}</div></div>`;
    });
    setTimeout(() => {
      data.categories.forEach((cat, i) => {
        const bar = document.getElementById(`bar${i}`);
        bar.style.width = cat.score + '%';
        if (cat.score >= 70) bar.style.background = '#4caf7d';
        else if (cat.score >= 50) bar.style.background = '#f0a500';
        else bar.style.background = '#e05a4e';
      });
    }, 100);
    const icons = { good: '✓', warn: '⚠', bad: '✗' };
    const feedbackEl = document.getElementById('feedbackList');
    feedbackEl.innerHTML = '';
    data.feedback.forEach((item, i) => {
      const div = document.createElement('div');
      div.className = `feedback-item ${item.type}`;
      div.style.animationDelay = `${i * 0.08}s`;
      div.innerHTML = `<span class="feedback-icon">${icons[item.type]}</span><span>${item.text}</span>`;
      feedbackEl.appendChild(div);
    });
    const kwEl = document.getElementById('keywordsGrid');
    kwEl.innerHTML = '';
    data.keywords.found.forEach(kw => { kwEl.innerHTML += `<span class="kw found">✓ ${kw}</span>`; });
    data.keywords.missing.forEach(kw => { kwEl.innerHTML += `<span class="kw missing">✗ ${kw}</span>`; });
  }

  function animateNum(id, from, to, duration) {
    const el = document.getElementById(id);
    const start = performance.now();
    function step(now) {
      const t = Math.min((now - start) / duration, 1);
      const ease = 1 - Math.pow(1 - t, 3);
      el.textContent = Math.round(from + (to - from) * ease);
      if (t < 1) requestAnimationFrame(step);
    }
    requestAnimationFrame(step);
  }

  function delay(ms) { return new Promise(r => setTimeout(r, ms)); }
</script>
</body>
</html>
